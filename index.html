<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AmitTG NumberTool</title>
<style>
  :root {
    --bg-color: #f8faff;
    --card-bg: rgba(255, 255, 255, 0.85);
    --text-color: #374151;
    --primary-color: #4f46e5;
    --secondary-color: #6366f1;
    --border-color: #e5e7eb;
    --shadow-color: rgba(0, 0, 0, 0.05);
    --history-total-color: #4f46e5;
  }
  .dark-mode {
    --bg-color: #1a1a2e;
    --card-bg: rgba(26, 32, 44, 0.85);
    --text-color: #f3f4f6;
    --primary-color: #7c3aed;
    --secondary-color: #8b5cf6;
    --border-color: #2d3748;
    --shadow-color: rgba(0, 0, 0, 0.2);
    --history-total-color: #8b5cf6;
  }
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
  }
  body {
    background: linear-gradient(135deg, var(--bg-color), #eef2f7);
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
    color: var(--text-color);
    transition: all 0.3s ease;
  }
  header {
    padding: 16px 20px;
    background: var(--card-bg);
    box-shadow: 0 2px 6px var(--shadow-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    backdrop-filter: blur(16px);
  }
  header h1 {
    font-size: 18px;
  }
  header button {
    background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
    border: none;
    padding: 8px 14px;
    border-radius: 20px;
    color: white;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
  }
  .theme-toggle {
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: var(--text-color);
    margin-left: 10px;
  }
  main {
    flex: 1;
    overflow: hidden;
    position: relative;
  }
  .screen {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow-y: auto;
    padding: 20px;
    display: none;
    animation: fadeIn 0.3s ease;
  }
  .screen.active {
    display: block;
  }
  .card {
    background: var(--card-bg);
    backdrop-filter: blur(16px);
    box-shadow: 0 4px 14px var(--shadow-color);
    border-radius: 16px;
    padding: 18px;
    margin-bottom: 20px;
    border: 1px solid var(--border-color);
  }
  textarea {
    width: 100%;
    border-radius: 12px;
    padding: 12px;
    font-size: 14px;
    resize: none;
    min-height: 180px;
    overflow-y: auto;
    margin-top: 10px;
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    line-height: 1.6;
    color: var(--text-color);
  }
  #freshPreview {
    border: 2px solid #16a34a;
  }
  #dupPreview {
    border: 2px solid #dc2626;
  }
  #invPreview {
    border: 2px solid #ea580c;
  }
  .btn {
    display: block;
    text-align: center;
    background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
    color: white;
    border: none;
    padding: 12px;
    font-weight: 600;
    border-radius: 12px;
    cursor: pointer;
    font-size: 15px;
    margin-top: 12px;
    box-shadow: 0 3px 10px rgba(79, 70, 229, 0.3);
    transition: all 0.2s ease;
  }
  .btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 5px 15px rgba(79, 70, 229, 0.4);
  }
  .tabs {
    display: flex;
    gap: 6px;
    margin-bottom: 14px;
  }
  .tab-btn {
    flex: 1;
    padding: 10px;
    border: none;
    border-radius: 8px;
    background: var(--border-color);
    font-weight: 600;
    cursor: pointer;
    color: var(--text-color);
    transition: all 0.2s ease;
  }
  .tab-btn.active {
    background: var(--primary-color);
    color: white;
  }
  .history-item {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    padding: 14px;
    border-radius: 10px;
    font-size: 15px;
    margin-bottom: 10px;
    transition: all 0.2s ease;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .history-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px var(--shadow-color);
  }
  .history-total {
    color: var(--history-total-color);
    font-weight: bold;
  }
  nav {
    background: var(--card-bg);
    box-shadow: 0 -2px 6px var(--shadow-color);
    display: flex;
    justify-content: space-around;
    border-top: 1px solid var(--border-color);
  }
  nav button {
    flex: 1;
    background: none;
    border: none;
    padding: 10px 0;
    font-weight: 600;
    color: #6b7280;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  nav button.active {
    color: var(--primary-color);
    position: relative;
  }
  nav button.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 50%;
    height: 3px;
    background: var(--primary-color);
    border-radius: 3px;
  }
  .toast {
    position: fixed;
    bottom: 70px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--primary-color);
    color: white;
    padding: 10px 20px;
    border-radius: 12px;
    display: none;
    font-size: 14px;
    font-weight: 600;
    box-shadow: 0 4px 12px var(--shadow-color);
    z-index: 100;
  }
  .popup-layer {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10;
  }
  .popup-box {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 12px;
    width: 300px;
    text-align: center;
    box-shadow: 0 10px 25px var(--shadow-color);
    border: 1px solid var(--border-color);
  }
  .popup-box input {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 14px;
    text-align: center;
    background: var(--card-bg);
    color: var(--text-color);
    caret-color: var(--primary-color);
  }
  .popup-box input:focus {
    outline: none;
    border-color: var(--primary-color);
  }
  .keypad {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-top: 15px;
  }
  .keypad-btn {
    background: var(--border-color);
    border: none;
    padding: 12px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s;
    color: var(--text-color);
  }
  .keypad-btn:hover {
    background: var(--primary-color);
    color: white;
  }
  .keypad-btn:active {
    transform: scale(0.95);
  }
  .keypad-btn.clear {
    grid-column: span 2;
    background: #fef2f2;
    color: #dc2626;
  }
  .dark-mode .keypad-btn.clear {
    background: #2a1a1a;
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .output-count {
    font-weight: 600;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .output-count span {
    font-size: 15px;
    background: var(--border-color);
    padding: 2px 8px;
    border-radius: 12px;
  }
  .copy-btn {
    background: #0d9488;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 4px 8px;
    cursor: pointer;
    font-size: 13px;
  }
</style>
</head>
<body>

<header>
  <div style="display: box; align-items: center;">
    <button class="theme-toggle" onclick="toggleTheme()">üåì</button>
  </div>
  <button onclick="copyHeaderText()">Radhe Radhe‚ù§Ô∏è‚Äçüî•</button>

<nav>
  <button class="active" onclick="switchScreen('input', this)">üì± (HOME)</button>
  <button onclick="switchScreen('output', this)">‚úÖ (RESULTS)</button>
  <button onclick="switchScreen('history', this)">üìÇ(History)</button>
</nav>
</header>

<main>
  <!-- Input -->
  <div class="screen active" id="screen-input">
    <div class="card">
      <h3>Paste Numbers</h3>
      <textarea id="numberInput" placeholder="Paste numbers here..."></textarea>
      <div class="btn" onclick="processNumbers()">Filter</div>
    </div>
  </div>

  <!-- Output -->
  <div class="screen" id="screen-output">
    <div class="card" id="mainOutput" style="display:none;">
      <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('fresh')">Fresh ‚úÖ</button>
        <button class="tab-btn" onclick="switchTab('dup')">Duplicate ‚ùå</button>
        <button class="tab-btn" onclick="switchTab('inv')">Invalid üö´</button>
      </div>
      <div id="fresh" class="tab-content active">
        <div class="output-count">
          <b>Fresh Numbers:</b>
          <span id="cleanCount">0</span>
        </div>
        <textarea readonly id="freshPreview"></textarea>
        <input type="hidden" id="cleanOutput" />
        <div class="btn" onclick="copyCommaSeparated('fresh')">üìã Copy</div>
        <div class="btn" onclick="showPopup()">üíæ Save</div>
      </div>
      <div id="dup" class="tab-content" style="display:none;">
        <div class="output-count">
          <b>Duplicates:</b>
          <span id="dupCount">0</span>
        </div>
        <textarea readonly id="dupPreview"></textarea>
      </div>
      <div id="inv" class="tab-content" style="display:none;">
        <div class="output-count">
          <b>Invalid:</b>
          <span id="invalidCount">0</span>
        </div>
        <textarea readonly id="invPreview"></textarea>
      </div>
    </div>
  </div>

  <!-- History -->
  <div class="screen" id="screen-history">
    <div class="card">
      <h3>üìÇ History</h3>
      <div id="historyList"><i>No history</i></div>
      <div class="btn" style="background: #dc2626;" onclick="document.getElementById('confirmPopup').style.display = 'flex'">üóë Clear All</div>
    </div>
  </div>
</main>


<div class="toast" id="toast"></div>

<!-- Save Popup -->
<div class="popup-layer" id="popup" onclick="hidePopup(event)">
  <div class="popup-box">
    <h4>üìÖ Enter Date Or Bot Number</h4>
    <input type="text" id="dateInput" placeholder="Enter" inputmode="none" readonly onfocus="this.blur()" /><br />
    <div class="keypad">
      <button class="keypad-btn" onclick="appendToDate('1')">1</button>
      <button class="keypad-btn" onclick="appendToDate('2')">2</button>
      <button class="keypad-btn" onclick="appendToDate('3')">3</button>
      <button class="keypad-btn" onclick="appendToDate('4')">4</button>
      <button class="keypad-btn" onclick="appendToDate('5')">5</button>
      <button class="keypad-btn" onclick="appendToDate('6')">6</button>
      <button class="keypad-btn" onclick="appendToDate('7')">7</button>
      <button class="keypad-btn" onclick="appendToDate('8')">8</button>
      <button class="keypad-btn" onclick="appendToDate('9')">9</button>
      <button class="keypad-btn" onclick="appendToDate('0')">0</button>
      <button class="keypad-btn clear" onclick="document.getElementById('dateInput').value = ''">Clear</button>
    </div>
    <div class="btn" onclick="saveNumbers()">Save</div>
  </div>
</div>

<!-- Confirm Clear Popup -->
<div class="popup-layer" id="confirmPopup" onclick="hideConfirm(event)">
  <div class="popup-box">
    <p>‚ùó Clear all history?</p>
    <div style="display: flex; gap: 8px; margin-top: 10px;">
      <div class="btn" style="background: #dc2626;" onclick="confirmClear()">Yes</div>
      <div class="btn" style="background: #9ca3af;" onclick="document.getElementById('confirmPopup').style.display = 'none'">No</div>
    </div>
  </div>
</div>

<script>
  // Theme management
  function toggleTheme() {
    document.body.classList.toggle('dark-mode');
    localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
  }
  
  // Check for saved theme preference
  if (localStorage.getItem('darkMode') === 'true') {
    document.body.classList.add('dark-mode');
  }

  function showToast(msg) {
    const toast = document.getElementById('toast');
    toast.textContent = msg;
    toast.style.display = 'block';
    setTimeout(() => (toast.style.display = 'none'), 2000);
  }
  
  function copyHeaderText() {
    navigator.clipboard.writeText('Radhe Radhe');
    showToast('‚úÖ Copied!');
  }
  
  function animatedCopy(buttonEl, text) {
    if (!text) return showToast('‚ö†Ô∏è Nothing to copy.');

    navigator.clipboard.writeText(text).then(() => {
      const originalText = buttonEl.textContent;
      buttonEl.textContent = '‚úÖ Copied!';
      buttonEl.disabled = true;
      setTimeout(() => {
        buttonEl.textContent = originalText;
        buttonEl.disabled = false;
      }, 1500);
    });
  }
  
  function copyCommaSeparated(type) {
    let text = '';
    if (type === 'fresh') {
      const numbers = document.getElementById('cleanOutput').value.split('\n');
      text = numbers.join(',');
    } else if (type === 'dup') {
      text = document.getElementById('dupPreview').value.split('\n').join(',');
    } else if (type === 'inv') {
      text = document.getElementById('invPreview').value.split('\n').join(',');
    }
    
    if (!text) return showToast('‚ö†Ô∏è Nothing to copy.');
    
    navigator.clipboard.writeText(text).then(() => {
      showToast('‚úÖ Copied');
    });
  }
  
  function processNumbers() {
    const input = document.getElementById('numberInput').value;
    const rawNumbers = input.split(/[\s,]+/);
    const invalid = [],
      seen = new Set(),
      duplicates = new Set(),
      finalCleaned = [];
    for (let num of rawNumbers) {
      num = num.replace(/\D/g, '');
      if (num.length === 10) {
        if (seen.has(num)) duplicates.add(num);
        else {
          seen.add(num);
          finalCleaned.push(num);
        }
      } else if (num.length > 0) {
        invalid.push(num);
      }
    }

    document.getElementById('mainOutput').style.display = 'block';

    // Fresh numbers output - one number per line
    const cleanNumbers = finalCleaned.join('\n');
    document.getElementById('cleanOutput').value = cleanNumbers;
    document.getElementById('cleanCount').textContent = finalCleaned.length;
    document.getElementById('freshPreview').value = cleanNumbers;

    // Duplicates - one number per line
    const dupArray = Array.from(duplicates);
    document.getElementById('dupCount').textContent = dupArray.length;
    document.getElementById('dupPreview').value = dupArray.join('\n');

    // Invalid - one number per line
    document.getElementById('invalidCount').textContent = invalid.length;
    document.getElementById('invPreview').value = invalid.join('\n');

    // Auto switch Output tab
    switchScreen('output', document.querySelector('nav button:nth-child(2)'));
  }
  
  function switchTab(id) {
    document.querySelectorAll('.tab-btn').forEach((b) => b.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach((c) => (c.style.display = 'none'));
    document.querySelector(`.tab-btn[onclick*="${id}"]`).classList.add('active');
    document.getElementById(id).style.display = 'block';
  }
  
  function showPopup() {
    document.getElementById('popup').style.display = 'flex';
  }
  
  function hidePopup(e) {
    if (e.target.id === 'popup') {
      document.getElementById('popup').style.display = 'none';
    }
  }
  
  function appendToDate(num) {
    const dateInput = document.getElementById('dateInput');
    dateInput.value += num;
  }
  
  function saveNumbers() {
    const lines = document.getElementById('numberInput').value.split('\n');
    const nameLine = lines.find((line) => line.trim().endsWith(':'));
    const name = nameLine ? nameLine.replace(':', '').trim() : 'Unnamed';
    const numbers = document.getElementById('cleanOutput').value;
    let date = document.getElementById('dateInput').value.trim();
    if (!numbers) return showToast('‚ö†Ô∏è Clean first.');
    if (!date) {
      const today = new Date();
      const monthNames = [
        'January',
        'February',
        'March',
        'April',
        'May',
        'June',
        'July',
        'August',
        'September',
        'October',
        'November',
        'December',
      ];
      date = `${today.getDate()} ${monthNames[today.getMonth()]}`;
    }
    const entry = { name, date, numbers, total: numbers.split('\n').length };
    const history = JSON.parse(localStorage.getItem('history') || '[]');
    history.unshift(entry);
    localStorage.setItem('history', JSON.stringify(history));
    showToast('‚úÖ Saved!');
    document.getElementById('popup').style.display = 'none';
    document.getElementById('dateInput').value = '';
    loadHistory();
  }
  
  function loadHistory() {
    const history = JSON.parse(localStorage.getItem('history') || '[]');
    const container = document.getElementById('historyList');
    container.innerHTML = '';
    if (!history.length) {
      container.innerHTML = '<i>No history</i>';
      return;
    }
    history.forEach((item) => {
      const div = document.createElement('div');
      div.className = 'history-item';
      
      // Create comma-separated numbers for copying
      const commaNumbers = item.numbers.split('\n').join(',');
      
      div.innerHTML = `
        <div>
          <span class="history-total">${item.total}</span> - ${item.name} (${item.date})
        </div>
        <button class="copy-btn" onclick="animatedCopy(this, '${commaNumbers.replace(/'/g, "\\'")}')">
          Copy
        </button>
      `;
      container.appendChild(div);
    });
  }
  
  function hideConfirm(e) {
    if (e.target.id === 'confirmPopup') {
      document.getElementById('confirmPopup').style.display = 'none';
    }
  }
  
  function confirmClear() {
    localStorage.removeItem('history');
    showToast('üóëÔ∏è History cleared!');
    document.getElementById('confirmPopup').style.display = 'none';
    loadHistory();
  }
  
  function switchScreen(name, btn) {
    document.querySelectorAll('nav button').forEach((b) => b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('.screen').forEach((s) => s.classList.remove('active'));
    document.getElementById(`screen-${name}`).classList.add('active');
  }
  
  window.onload = () => {
    loadHistory();
    
    // Prevent mobile keyboard from showing on date input
    document.getElementById('dateInput').addEventListener('focus', function(e) {
      e.preventDefault();
      this.blur();
    });
  };
</script>
</body>
</html>
